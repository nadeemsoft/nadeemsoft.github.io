<!DOCTYPE html>
<html>

<head>
    <title>Courses</title>
    <meta charset="utf-8">
    <!--meta element used by browser,(how to display content) by search engine keyword-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <!--A <meta> viewport element gives the browser instructions on how to control the page's dimensions and scaling.-->
    <meta name="description" content="Free Web tutorials">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <!--font-awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/newstyle.css">
    <!--slider css-->
    <link rel="stylesheet" type="text/css" href="css/custom-style.css">
    <link rel="stylesheet" href="vendors/slider/css/slider.css">
    <!--slider css-->
    <link rel="stylesheet" type="text/css" href="css/responsive.css">
    <link rel="stylesheet" type="text/css" href="css/course.css">
    <style>
        #courseDeptList {
            display: inline-flex;
            cursor: pointer;
            list-style: none;
        }

        #courseDeptList li {
            background-color: #0f1336;
            font-size: 20px;
            margin-top: 17px;
            color: #eee;
            padding: 5px 12px;
            margin: 5px;
            border-radius: 4px;
        }
        #courseDeptList li:hover {
            background-color: green;
            font-size: 20px;
            color: #eee;
        }
        .resError{
            color: red;
            font-size: 20px;
            margin-top: 20px;
        }
        .active-tab{
            background: green !important;
        }
    </style>
</head>

<body>
    <!--preloader-->
    <div id="preloader">
        <div id="loader"></div>
    </div>
    <!--preloader-->
        <!--pleaseWait-->
        <div id="pleaseWait">
            <img src="image/pleaseWait.gif">
        </div>
        <!--pleaseWait-->
    <div id="commonPopup"></div>
    <center>
        <div id="wrapper">
            <div id="header"></div>
            <!--end of header-->
            <div id="menu"></div>
            <!--end of menu-->

            <div id="subBanner">
                <h4>COURSES WE PROVIDE</h4>
            </div>
            <!--end of bannerSlider-->
            
        </div>
        <div class="content">
            <ul id="courseDeptList">
                <li class="active-tab" onclick='getAllCourse(this);'>All</li>
            </ul>
            <div id="courselist">
            </div>




            <!--end of content-->
        </div>

        <div id="footer">

        </div>
        <!--end of footer-->
        </div>
        <!--end of wrapper-->
    </center>

    <script src="js/jquery.min.js"></script>
    <!--slider js-->
    <script src="vendors/slider/js/prism.js"></script>
    <script src="vendors/slider/js/slider.js"></script>
    <!--slider js-->
    <script src="js/common.js" type="text/javascript"></script>
    <script src="js/api_ajax.js" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            $("#header").load("https://nadeemsoft.github.io/header.html");
            $("#menu").load("https://nadeemsoft.github.io/menu.html");
            $("#commonPopup").load("https://nadeemsoft.github.io/commonPopup.html");
            $("#footer").load("https://nadeemsoft.github.io/footer.html");
        });

        //this is for courses
        $.ajax({
            type: "get",
            url: "http://mgcollege.pythonanywhere.com/apiv1/course_depaartments/",
            dataType: "json",
            success: function (response) {
                console.log(response);
                var courseDept = '';
                for (var i = 0; i < response.length; i++) {
                    console.log(response[i]);
                    courseDept += "<li class='test' onclick='getCourseByDept(this," + response[i].id + ");'>" +
                        response[i].cat_name + "</li>"
                }
                document.getElementById("courseDeptList").innerHTML += courseDept;
            },
        });
        function getCourseByDept(obj,deptId) {
            $("#pleaseWait").show();
            $("#courseDeptList li").removeClass("active-tab");
            $(obj).addClass("active-tab");
            document.getElementById("courselist").innerHTML = "";
            $.ajax({
                type: "get",
                url: "http://mgcollege.pythonanywhere.com/apiv1/course_by_depaartments/" + deptId,
                dataType: "json",
                success: function (response) {
                    console.log(response.status);
                    $("#pleaseWait").hide();
                    if (response.status == 1) {
                        var courselist = '';
                        for (var i = 0; i < response.data.length; i++) {
                            console.log(response.data[i].course_name);
                            courselist += '<div class="courseOuterDiv">'
                                + '<img src="'+response.data[i].image+'">'
                                + '<div class="course-title"><h4>'+response.data[i].course_name+'</h4>'
                                + '<div class="des">'+response.data[i].description+'</div></div></div>';
                        }
                        document.getElementById("courselist").innerHTML = courselist;
                    } else {
                        document.getElementById("courselist").innerHTML = "<h4 class='resError'>Record Not Found..</h4>";
                    }
                },
            });
        }

        function getAllCourse(obj){
            //$("#pleaseWait").show();
            $("#courseDeptList li").removeClass("active-tab");
            $(obj).addClass("active-tab");
            alert("get all course from API..");
            // $.ajax({
            //     type: "get",
            //     url: "http://mgcollege.pythonanywhere.com/apiv1/course_by_depaartments/" + deptId,
            //     dataType: "json",
            //     success: function (response) {
                    //$("#pleaseWait").hide();
            //         console.log(response.status);
            //         if (response.status == 1) {
            //             var courselist = '';
            //             for (var i = 0; i < response.data.length; i++) {
            //                 console.log(response.data[i].course_name);
            //                 courselist += '<div class="courseOuterDiv">'
            //                     + '<img src="'+response.data[i].image+'">'
            //                     + '<div class="course-title"><h4>'+response.data[i].course_name+'</h4>'
            //                     + '<div class="des">'+response.data[i].description+'</div></div></div>';
            //             }
            //             document.getElementById("courselist").innerHTML = courselist;
            //         } else {
            //             document.getElementById("courselist").innerHTML = "<h4 class='resError'>Record Not Found..</h4>";
            //         }
            //     },
            // });
        }
        
    </script>
</body>

</html>